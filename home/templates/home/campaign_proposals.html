{% extends 'home/base.html' %}
{% load bootstrap3 %}

{% block title %}{% endblock %}

{% block content %}
    <h2>
    Dashboard
    </h2>
    <table id="proposal_table" class="table table-striped table-bordered generic_table" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>#</th>
                <th>Id</th>
                <th>Campaign Title</th>
                <th>Target Amount</th>
                <th>Proposal Status</th>
                <th>Initiator</th>
                <th>Campaign Url</th>
                <th>Documentation</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        {% for entry in content %}
            <tr>
                <td scope="row">{{ forloop.counter }}</td>
                <td>{{ entry.id }}</td>
                <td>{{ entry.title }}</td>
                <td>{{ entry.targetAmount }}</td>
                <td>{{ entry.proposalStatus }}</td>
                <td>{{ entry.initiator.name }}</td>
                <td>{{ entry.campaignUrl|urlize }}</td>
                <td>
                    <div class="table_div">
                        {% for key, value in entry.campaignProposalDocumentIds.items %}
                            {% if not forloop.last %}
                                <div class="filename">
                                    <a href="https://ct-campaign-service.herokuapp.com/campaignProposal/{{ entry.id }}/doc/{{ key }}">{{ value }}</a>,
                                </div>
                            {% elif forloop.last %}
                                <div class="filename">
                                    <a href="https://ct-campaign-service.herokuapp.com/campaignProposal/{{ entry.id }}/doc/{{ key }}">{{ value }}</a>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </td>
                <td><td><a href="{% url 'home:campaign_proposal_details' entry.id %}">Edit</a></td></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}